
--ALTA DE UN GRADO
CREATE OR REPLACE PROCEDURE ALTA_GRADO(IDNIVEL$ IN NUMBER,IDGRADO$ IN NUMBER)
AS
	NIVEL$		VARCHAR2(45); 	
BEGIN
	INSERT INTO NIVEL_GRADO(IDNIVEL,IDGRADO) VALUES(IDNIVEL$,IDGRADO$);
	EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
    	SELECT NIVEL INTO NIVEL$ FROM NIVEL WHERE IDNIVEL=IDNIVEL$;
    	DBMS_OUTPUT.PUT_LINE('EL GRADO: '||IDGRADO$||' EN '||IDNIVEL$||'('||NIVEL$||') YA EXISTE');
END ALTA_GRADO;
/

--BAJA DE GRADO
CREATE OR REPLACE PROCEDURE BAJA_GRUPO(IDNIVEL$ IN NUMBER,IDGRADO$ NUMBER)
AS
BEGIN
	DELETE FROM NIVEL_GRADO WHERE IDNIVEL=IDNIVEL$ AND IDGRADO=IDGRADO$;
	IF SQL%NOTFOUND THEN
		DBMS_OUTPUT.PUT_LINE('EL GRADO NO EXISTE');
	ELSE
		DBMS_OUTPUT.PUT_LINE('EL GRADO SE ELIMINO');
	END IF;
	COMMIT;
END BAJA_GRUPO;
/

--ACTUALIZACION DE GRADO
CREATE OR REPLACE PROCEDURE ACTUALIZA_GRUPO(IDNIVEL$ IN NUMBER,IDGRADO$ IN NUMBER,NUEVO_IDGRADO$ IN NUMBER)
AS
BEGIN
	UPDATE NIVEL_GRADO SET IDGRADO=NUEVO_IDGRADO$ WHERE IDNIVEL=IDNIVEL$ AND IDGRADO=IDGRADO$;
	IF SQL%NOTFOUND THEN
		DBMS_OUTPUT.PUT_LINE('NO EXISTE EL NIVEL A ACTUALIZAR');
	ELSE
		DBMS_OUTPUT.PUT_LINE('SE ACTUALIZO EL NIVEL');
		COMMIT;
	END IF;
END ACTUALIZA_GRUPO;
/
